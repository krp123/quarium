{"metaClass":"report$Report","id":"a3884041-0dbe-d604-e9bd-729620d281a8","code":"regressReport","roles":[],"defaultTemplate":{"metaClass":"report$ReportTemplate","id":"825680e4-644d-80bd-2a48-54ed291139a5","code":"regressReportTemplate","customDefinedBy":"100","custom":"false","version":"15","outputNamePattern":"RegressReport","reportOutputType":"50","groovy":"false","customDefinition":"","report":{"metaClass":"report$Report","id":"a3884041-0dbe-d604-e9bd-729620d281a8"},"name":"regressReportTemplate1.xlsx","alterable":"false"},"bands":[{"metaClass":"report$BandDefinition","id":"d29f83af-cf28-9522-ece1-d7ed834ffa94","orientation":"","childrenBandDefinitions":[{"metaClass":"report$BandDefinition","id":"71cce863-7382-2706-b9c2-992b073c007d","orientation":"0","childrenBandDefinitions":[{"metaClass":"report$BandDefinition","id":"43f78d0a-35ff-4468-d986-a1d7d07fc3f8","orientation":"0","childrenBandDefinitions":[{"metaClass":"report$BandDefinition","id":"6e4bc612-54c2-a659-2bf2-132f744cfb1d","orientation":"0","childrenBandDefinitions":[{"metaClass":"report$BandDefinition","id":"ee11d68f-8db4-db6a-0168-0277c22139c9","orientation":"0","childrenBandDefinitions":[],"name":"TestCase","parentBandDefinition":{"metaClass":"report$BandDefinition","id":"6e4bc612-54c2-a659-2bf2-132f744cfb1d"},"report":{"metaClass":"report$Report","id":"a3884041-0dbe-d604-e9bd-729620d281a8"},"dataSets":[{"metaClass":"report$DataSet","id":"30e5eccc-510c-3b60-278f-5a646443e90a","type":"30","jsonSourceType":"10","name":"TestCase","useExistingView":"false","bandDefinition":{"metaClass":"report$BandDefinition","id":"ee11d68f-8db4-db6a-0168-0277c22139c9"},"text":"import com.haulmont.cuba.core.Persistence\nimport com.haulmont.cuba.core.Transaction\nimport com.haulmont.cuba.core.global.AppBeans\nimport com.company.quarium.entity.checklist.TestCase\nimport com.company.quarium.entity.checklist.Step\n\nPersistence persistence \u003d AppBeans.get(Persistence.NAME)\nTransaction tx \u003d persistence.createTransaction()\n\nList\u003cTestCase\u003e testCaseList \u003d parentBand.getParameterValue(\"cTestCaseList\")\n\ntry {\n    def result \u003d []\n    for (TestCase tc : testCaseList) {\n        String steps \u003d \"\";\n        for (Step s : tc.caseStep) {\n            steps +\u003d s.step + \"\\n\"\n        }\n        if (steps.endsWith(\"\\n\")) {\n            steps \u003d steps.substring(0, steps.length() - 1)\n        }\n        result.add([\n                \u0027cTestCaseName\u0027  : tc.name,\n                \u0027cExpectedResult\u0027: tc.expectedResult,\n                \u0027cStep\u0027      : steps\n        ])\n    }\n    tx.commit()\n    return result\n} finally {\n    tx.end()\n}","view":"null"}],"position":"0"}],"name":"Checklist","parentBandDefinition":{"metaClass":"report$BandDefinition","id":"43f78d0a-35ff-4468-d986-a1d7d07fc3f8"},"report":{"metaClass":"report$Report","id":"a3884041-0dbe-d604-e9bd-729620d281a8"},"dataSets":[{"metaClass":"report$DataSet","id":"a7a8b081-b835-fdde-ec8e-026608407fde","type":"30","jsonSourceType":"10","name":"Checklist","useExistingView":"false","bandDefinition":{"metaClass":"report$BandDefinition","id":"6e4bc612-54c2-a659-2bf2-132f744cfb1d"},"text":"import com.haulmont.cuba.core.Persistence\nimport com.haulmont.cuba.core.Transaction\nimport com.haulmont.cuba.core.global.AppBeans\nimport com.company.quarium.entity.checklist.RegressChecklist\n\nPersistence persistence \u003d AppBeans.get(Persistence.NAME)\nTransaction tx \u003d persistence.createTransaction()\ndef module \u003d parentBand.getParameterValue(\"cModuleId\")\n\ntry {\n    List\u003cRegressChecklist\u003e regressChecklist \u003d persistence.getEntityManager().createQuery(\n            \u0027select t from quarium_RegressChecklist t where t.regressProject \u003d :param\u0027 +\n                    \u0027 and t.module.id \u003d :cModuleId\u0027, RegressChecklist.class)\n            .setParameter(\u0027param\u0027, params.entity)\n            .setParameter(\u0027cModuleId\u0027, module)\n            .setViewName(\u0027regressChecklist-view\u0027)\n            .getResultList()\n\n    def result \u003d []\n    for (RegressChecklist rc : regressChecklist) {\n        result.add([\n                \u0027cName\u0027        : rc.name,\n                \u0027cState\u0027       : rc.state?.name,\n                \u0027cQa\u0027          : rc.assignedQa?.qa?.fullName,\n                \u0027cTestCaseList\u0027: rc.testCase,\n                \u0027checklist\u0027    : rc\n        ])\n    }\n    tx.commit()\n    return result\n} finally {\n    tx.end()\n}","view":"null"}],"position":"0"}],"name":"Module","parentBandDefinition":{"metaClass":"report$BandDefinition","id":"71cce863-7382-2706-b9c2-992b073c007d"},"report":{"metaClass":"report$Report","id":"a3884041-0dbe-d604-e9bd-729620d281a8"},"dataSets":[{"metaClass":"report$DataSet","id":"9c198a0e-6e3c-31a5-23af-651e417bcb72","type":"10","jsonSourceType":"10","name":"Module","useExistingView":"false","bandDefinition":{"metaClass":"report$BandDefinition","id":"43f78d0a-35ff-4468-d986-a1d7d07fc3f8"},"text":"select distinct\nm.NAME as \"cModule\",\nm.id as \"cModuleId\"\nfrom quarium_checklist c \ninner join\nQUARIUM_MODULE m on c.MODULE_ID \u003d m.ID\nwhere c.REGRESS_PROJECT_ID \u003d ${entity}","view":"null"}],"position":"0"}],"name":"Description","parentBandDefinition":{"metaClass":"report$BandDefinition","id":"d29f83af-cf28-9522-ece1-d7ed834ffa94"},"report":{"metaClass":"report$Report","id":"a3884041-0dbe-d604-e9bd-729620d281a8"},"dataSets":[{"metaClass":"report$DataSet","id":"1e5aa4a7-f6bd-0751-9c8e-7b65cebd9760","type":"30","jsonSourceType":"10","name":"Description","useExistingView":"false","bandDefinition":{"metaClass":"report$BandDefinition","id":"71cce863-7382-2706-b9c2-992b073c007d"},"text":"import com.company.quarium.entity.project.QaProjectRelationship\nimport com.haulmont.cuba.core.Persistence\nimport com.haulmont.cuba.core.Transaction\nimport com.haulmont.cuba.core.global.AppBeans\nimport com.company.quarium.entity.project.SimpleProject\n\nPersistence persistence \u003d AppBeans.get(Persistence.NAME)\nTransaction tx \u003d persistence.createTransaction()\ntry {\n    SimpleProject project \u003d persistence.getEntityManager().createQuery(\n            \u0027select t from quarium_SimpleProject t where t \u003d :param\u0027, SimpleProject.class)\n            .setParameter(\u0027param\u0027, params.entity)\n            .setViewName(\u0027simpleProject-view\u0027)\n            .getFirstResult()\n    String qaList \u003d \"\";\n    for (QaProjectRelationship q : project.qa) {\n        qaList +\u003d q.qa.fullName + \", \"\n    }\n    if (qaList.endsWith(\", \")) {\n        qaList \u003d qaList.substring(0, qaList.length() - 2)\n    }\n    def result \u003d [[\n                          \u0027pName\u0027             : project.projectName,\n                          \u0027pRegressStartDate\u0027 : project.regressStartDate,\n                          \u0027pRegressFinishDate\u0027: project.regressFinishDate,\n                          \u0027pThesisVersion\u0027    : project.thesisVersion?.number,\n                          \u0027pDbms\u0027             : project.dbms?.name,\n                          \u0027pQa\u0027               : qaList\n                  ]]\n    tx.commit()\n    return result\n} finally {\n    tx.end()\n}","view":"null"}],"position":"0"}],"name":"Root","report":{"metaClass":"report$Report","id":"a3884041-0dbe-d604-e9bd-729620d281a8"},"dataSets":[],"position":"0"},{"metaClass":"report$BandDefinition","id":"71cce863-7382-2706-b9c2-992b073c007d"},{"metaClass":"report$BandDefinition","id":"6e4bc612-54c2-a659-2bf2-132f744cfb1d"},{"metaClass":"report$BandDefinition","id":"43f78d0a-35ff-4468-d986-a1d7d07fc3f8"},{"metaClass":"report$BandDefinition","id":"ee11d68f-8db4-db6a-0168-0277c22139c9"}],"inputParameters":[{"metaClass":"report$ReportInputParameter","id":"2784d121-899b-5229-4390-ddff299ccfa7","lookup":"false","entityMetaClass":"quarium_SimpleProject","parameterClassName":"com.company.quarium.entity.project.SimpleProject","predefinedTransformation":"","type":"30","required":"false","validationOn":"false","defaultDateIsCurrent":"false","report":{"metaClass":"report$Report","id":"a3884041-0dbe-d604-e9bd-729620d281a8"},"name":"Проект","alias":"entity","position":"0"}],"validationOn":"false","reportType":"10","reportScreens":[{"metaClass":"report$ReportScreen","id":"2ba12a29-55ea-4a3d-8588-7e75f58d1c00","screenId":"quarium_SimpleProject.edit","report":{"metaClass":"report$Report","id":"a3884041-0dbe-d604-e9bd-729620d281a8"}}],"screensIdx":",quarium_SimpleProject.edit,","group":{"metaClass":"report$ReportGroup","id":"4e083530-0b9c-11e1-9b41-6bdaa41bff94","localeNames":"en\u003dGeneral\nru\u003dОбщие","code":"ReportGroup.default","title":"General","version":"0"},"inputEntityTypesIdx":",quarium_SimpleProject,","valuesFormats":[],"templates":[{"metaClass":"report$ReportTemplate","id":"825680e4-644d-80bd-2a48-54ed291139a5"}],"version":"114","system":"false","name":"Отчет по регрессу"}